> # m4a_to_mp3.cmd

* 「```iTunes```」とかで階層化されたフォルダーに仕訳られた「～.m4a」ファイルを探して「～.mp3」ファイルへ変換するWindowsコマンドプロンプト向けバッチファイルです。

* 「m4a → mp3」変換には「[FFmpeg](https://ffmpeg.org/)」を利用してます。

> **事前準備**

* 「[FFmpeg](https://ffmpeg.org/)」は、自分の環境にあわせてダウンロード／展開して下さい。

* 自分の場合、DLLは不必要だったので、下記のファイルをダウンロードしました。

  | Version | Architecture | Linking |
  | :-----: | :----------: | :-----: |
  |  3.2.2  |    64-bit    | Static  |

* ダウンロードした「ffmpeg-3.2.2-win64-static.zip」は素直に展開します。

* 展開後「bin」フォルダーにある「ffmpeg.exe」だけを使うので「PATH」の通ったところへ移します。

> **コマンドの使い方**

1. 「m4a_to_mp3.cmd」をコピーします。

   * コピー先は、変換したい「～.m4a」ファイルと同じフォルダー階層、または１つ上の親フォルダー階層です。

1. 「m4a_to_mp3.cmd」をダブルクリックで実行します。

> **コマンドの動作仕様**

1. 「forfiles」で、このコマンドを配置したフォルダーから「～.m4a」ファイルを抽出する。

   * サブフォルダーも含めて、「～.m4a」ファイルを抽出する。

1. 「FFmpeg」を利用して、「m4a → mp3」変換するコマンドを実行する。

1. 「～.mp3」ファイルの出力先は、変換元の「～.m4a」ファイルと同一パスへ出力する。

1. 「forfiles」の兼ね合い上、変換後のファイル名末尾を「～.m4a.mp3」にしちゃったので「～.mp3」へリネームする。

1. 「～.m4a」ファイルを削除する。
